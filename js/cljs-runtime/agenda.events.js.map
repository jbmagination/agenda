{"version":3,"sources":["agenda/events.cljs"],"sourcesContent":["(ns agenda.events\n  (:require\n   [ajax.core :as ajax]\n   [day8.re-frame.http-fx]\n   [re-frame.core :as re-frame]\n   [agenda.coeffects]\n   [agenda.effects]\n   [agenda.db :as db]))\n\n(re-frame/reg-event-db\n ::initialize-db\n (fn [_ _]\n   db/default-db))\n\n(re-frame/reg-event-fx\n ::new-item\n (fn [{{:keys [assignments] :as db} :db :as fx} event]\n   (let [input-element (.getElementById js/document \"myInput\")\n         assignment  (.-value input-element)]\n     (set! (.-value input-element) \"\")\n     (if (empty? assignment)\n       (do\n         (js/alert \"You must type in something!\" )\n         fx)\n       (let [new-assignments (conj assignments  {:description assignment\n                                                 :completed? false})]\n         {:db (assoc db :assignments new-assignments)\n          :write-localstore {\"agenda.assignments\" new-assignments}})))))\n\n\n(defn item-remove\n  \"remove item in assignments\"\n  [assignments index]\n  (vec (concat (subvec assignments 0 index) (subvec assignments (inc index)))))\n\n\n(re-frame/reg-event-fx\n ::remove-item\n (fn [{{:keys [assignments] :as db} :db :as fx} [_ index :as event]]\n   (println \"Event = \" event)\n   (println \"Assignments = \" assignments)\n   (let [new-assignments (item-remove assignments index)]\n     (println \"New Assignments = \" new-assignments)\n     {:db (assoc db :assignments new-assignments)\n      :write-localstore {\"agenda.assignments\" new-assignments}})))\n\n\n\n(re-frame/reg-event-fx\n ::toggle-completion\n (fn [{{:keys [assignments] :as db} :db :as fx} [_ index :as event]]\n   (println \"Event = \" event)\n   (println \"Assignments = \" assignments)\n   (let [{:keys [completed?]} (assignments index)\n         new-assignments (update assignments index assoc :completed? (not completed?))]\n     {:db (assoc db :assignments new-assignments)\n      :write-localstore {\"agenda.assignments\" new-assignments}})))\n"],"mappings":"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","names":["re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2","_","agenda.db/default-db","re_frame.core.reg_event_fx.cljs$core$IFn$_invoke$arity$2","p__13943","map__13944","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","map__13945","cljs.core.get.cljs$core$IFn$_invoke$arity$2","assignments","db","fx","event","input-element","js/document","assignment","cljs.core/empty?","js/alert","new-assignments","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","agenda.events/item-remove","index","cljs.core/vec","cljs.core.concat.cljs$core$IFn$_invoke$arity$2","cljs.core.subvec.cljs$core$IFn$_invoke$arity$3","cljs.core.subvec.cljs$core$IFn$_invoke$arity$2","p__13948","p__13949","map__13950","map__13951","vec__13952","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","cljs.core.println.cljs$core$IFn$_invoke$arity$variadic","p__13957","p__13958","map__13959","map__13960","vec__13961","map__13966","completed?","cljs.core.update.cljs$core$IFn$_invoke$arity$5","cljs.core/assoc","cljs.core/not"]}