{"version":3,"sources":["day8/re_frame/trace/view/timing.cljs"],"sourcesContent":["(ns day8.re-frame.trace.view.timing\n  (:require [devtools.prefs]\n            [devtools.formatters.core]\n            [mranderson047.re-frame.v0v10v2.re-frame.core :as rf]\n            [day8.re-frame.trace.utils.re-com :as rc]\n            [day8.re-frame.trace.common-styles :as common]\n            [day8.re-frame.trace.view.components :as components]))\n\n(def timing-styles\n  [:#--re-frame-trace--\n   [:.timing-details\n    {:background-color common/white-background-color\n     :margin-top       common/gs-31s\n     :padding          common/gs-19}]\n   [:.timing-details--line\n    {:margin \"1em 0\"}]\n\n   [:p :ol\n    {:max-width \"26em\"}]\n   [:ol\n    {\"-webkit-padding-start\" \"20px\"}]\n   [:li\n    {:margin \"0 0 1em 0\"}]\n\n   [\".rft-tag__timing\"\n    {:background-color common/disabled-background-color\n     :border           (str \"1px solid \" common/border-line-color)\n     :font-weight      \"normal\"\n     :font-size        \"14px\"}]\n\n   [\".timing-part-panel\"\n    (merge (common/panel-style \"3px\")\n           {:padding \"12px\"\n            :margin common/gs-7s})]\n   ])\n\n(defn timing-tag [label]\n  [components/tag \"rft-tag__timing\" label])\n\n(defn timing-section\n  [label time]\n  [rc/v-box\n   :align :center\n   :gap \"3px\"\n   :children [[rc/label :class \"bm-textbox-label\" :label label]\n              [timing-tag (str time \"ms\")]]])\n\n(defn render []\n  (let [timing-data-available? @(rf/subscribe [:timing/data-available?])]\n    (if timing-data-available?\n      [rc/v-box\n       :class \"timing-details\"\n       :children [\n                  [rc/h-box\n                   :gap common/gs-12s\n                   :class \"timing-part-panel\"\n                   :children\n                   [[timing-section \"total\" @(rf/subscribe [:timing/total-epoch-time])]\n                    [timing-section \"event\" @(rf/subscribe [:timing/event-processing-time])]\n                    ]]\n                  (doall\n                    (for [frame (range 1 (inc @(rf/subscribe [:timing/animation-frame-count])))\n                          :let [frame-time (rf/subscribe [:timing/animation-frame-time frame])]]\n                      (list\n                        ;^{:key (str \"af-line\" frame)}\n                        ;[rc/line :class \"timing-details--line\"]\n                        ^{:key (str \"af\" frame)}\n                        [rc/h-box\n                         :align :center\n                         :class \"timing-part-panel\"\n                         :gap \"25px\"\n                         :children\n                         [[rc/label :label (str \"Animation frame #\" frame)]\n                          [timing-section \"total\" @frame-time]\n                          #_[timing-section \"subs\" 2]\n                          #_[timing-section \"views\" 3]]])))\n\n                  [rc/line :class \"timing-details--line\"]\n\n                  [rc/v-box\n                   :children\n                   [[rc/p \"Be careful. There are two problems with these numbers:\"]\n                    [:ol\n                     [:li \"Accurately timing anything in the browser is a nightmare. One moment a given function takes 1ms and the next it takes 10ms, and you'll never know why. So bouncy.\"]\n                     [:li \"You're currently running the dev build, not the production build. So don't freak out too much. Yet.\"]]\n                    [rc/hyperlink-href\n                     :label \"Timing documentation\"\n                     :style {:margin-left common/gs-7s}\n                     :attr {:rel \"noopener noreferrer\"}\n                     :target \"_blank\"\n                     :href \"https://github.com/Day8/re-frame-trace/blob/master/docs/HyperlinkedInformation/UnderstandingTiming.md\"]]]]]\n      [rc/v-box\n       :class \"timing-details\"\n       :children [[:h1 \"No timing data available currently.\"]]])))\n"],"mappings":"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","names":["day8.re-frame.trace.view.timing/timing-styles","day8.re-frame.trace.common-styles/white-background-color","day8.re-frame.trace.common-styles/gs-31s","day8.re-frame.trace.common-styles/gs-19","day8.re-frame.trace.common-styles/disabled-background-color","day8.re-frame.trace.common-styles/border-line-color","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","day8.re-frame.trace.common-styles/panel-style","day8.re-frame.trace.common-styles/gs-7s","day8.re-frame.trace.view.timing/timing-tag","label","day8.re-frame.trace.view.components/tag","day8.re-frame.trace.view.timing/timing-section","time","day8.re-frame.trace.utils.re-com/v-box","day8.re-frame.trace.utils.re-com/label","day8.re-frame.trace.view.timing/render","cljs.core/deref","timing-data-available?","G__20092","mranderson047.re-frame.v0v10v2.re-frame.core/subscribe","day8.re-frame.trace.utils.re-com/h-box","day8.re-frame.trace.common-styles/gs-12s","G__20093","G__20094","cljs.core.doall.cljs$core$IFn$_invoke$arity$1","iter__4324__auto__","s__20096","cljs.core/LazySeq","temp__5457__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4322__auto__","size__4323__auto__","cljs.core/count","b__20098","cljs.core/chunk-buffer","i__20097","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__20095","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","frame","cljs.core.range.cljs$core$IFn$_invoke$arity$2","G__20105","frame-time","G__20102","G__20103","cljs.core/List","day8.re-frame.trace.utils.re-com/line","day8.re-frame.trace.utils.re-com/p","day8.re-frame.trace.utils.re-com/hyperlink-href","cljs.core/chunk-first"]}